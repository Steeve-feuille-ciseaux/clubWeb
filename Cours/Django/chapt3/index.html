<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Django - base de donnÃ©es</title>
    <link rel="stylesheet" href="../assets/gpt.css">
</head>
<body>
    <main>
        <h1>Django : base de donnÃ©es</h1>

        <section>
            <h2>1. GÃ©rer une base de donnÃ©es</h2>

            <h3>CrÃ©er un modÃ¨le dans <code>pages/models.py</code> :</h3>
            <p>Ouvre le fichier pages/models.py dans le dossier pages de ton application.</p>
            <p>Remplace son contenu ou ajoute cette fonction Ã  la fin du fichier :</p>
            <pre><code>            from django.db import models

            class Article(models.Model):
                titre = models.CharField(max_length=100)
                contenu = models.TextField()
                date_pub = models.DateTimeField(auto_now_add=True)

                def __str__(self):
                    return self.titre</code></pre>
            <a href="db.html">dÃ©tails de la commande</a>

            <h3>CrÃ©er la base de donnÃ©es :</h3>
            <pre><code>                python manage.py makemigrations
                python manage.py migrate</code></pre>
            <p>Tu dois exÃ©cuter ces commandes <strong>dans le terminal, Ã  la racine de ton projet Django,</strong>  câ€™est-Ã -dire lÃ  oÃ¹ se trouve le fichier manage.py.</p>
            <p>Ton arborescence de projet ressemble Ã  quelque chose comme :</p>
            <pre><code>
mon_projet/
â”‚
â”œâ”€â”€ manage.py
â”œâ”€â”€ pages/
â”œâ”€â”€ mon_projet/
â”œâ”€â”€ db.sqlite3  <-- (si dÃ©jÃ  crÃ©Ã©)
            </code></pre>
            <p>Tu dois Ãªtre dans le dossier <strong>mon_projet/ (le premier niveau)</strong>, lÃ  oÃ¹ est <strong>manage.py.</strong></p>
            
            <h3>Explications des commandes</h3>
            <p><strong>1. CrÃ©er les fichiers de migration :</strong></p>
            <pre><code>python manage.py makemigrations</code></pre>
            <p>Cette commande gÃ©nÃ¨re des fichiers dans le dossier <code>migrations/</code> de chaque application. Ces fichiers dÃ©crivent les modifications Ã  apporter Ã  la base de donnÃ©es.</p>

            <p><strong>2. Appliquer les migrations Ã  la base de donnÃ©es :</strong></p>
            <pre><code>python manage.py migrate</code></pre>
            <p>Cette commande crÃ©e ou modifie les tables dans la base de donnÃ©es en fonction des migrations gÃ©nÃ©rÃ©es.</p>

            <p><strong>Astuce :</strong> Si le fichier <strong>db.sqlite3</strong> (ou autre base de donnÃ©es) n'existe pas encore, il sera automatiquement crÃ©Ã© lors de l'exÃ©cution de <strong>migrate</strong>.</p>

            <h3>Enregistrer le modÃ¨le dans lâ€™admin :</h3>
            <p>Ouvre le fichier <strong>pages/admin.py</strong> dans le dossier pages de ton projet.</p>
            <p>Ton arborescence de projet ressemble Ã  quelque chose comme :</p>
            <pre><code>
mon_projet/
â”œâ”€â”€ mon_app/
â”‚   â”œâ”€â”€ admin.py       â† C'est ici que tu ajoutera le code
â”‚   â”œâ”€â”€ models.py      â† Ton modÃ¨le Article est ici
â”‚   â”œâ”€â”€ views.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ manage.py
            </code></pre>
            <p>Remplace son contenu ou ajoute cette fonction Ã  la fin du fichier :</p>

            <pre><code>from django.contrib import admin
from .models import Article

admin.site.register(Article)</code></pre>

            <h3>ğŸ§  Explication ligne par ligne</h3>
            <table border="1" cellpadding="5" cellspacing="0">
                <thead>
                <tr>
                    <th>Ligne</th>
                    <th>RÃ´le</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><code>from django.contrib import admin</code></td>
                    <td>Importe le module d'administration fourni par Django.</td>
                </tr>
                <tr>
                    <td><code>from .models import Article</code></td>
                    <td>Importe le modÃ¨le <strong>Article</strong> dÃ©fini dans ton fichier <strong>models.py</strong>.</td>
                </tr>
                <tr>
                    <td><code>admin.site.register(Article)</code></td>
                    <td>Enregistre le modÃ¨le dans lâ€™interface dâ€™administration. Cela permet dâ€™ajouter, modifier et supprimer des articles via <strong>/admin</strong>.</td>
                </tr>
                </tbody>
            </table>

            <h3>CrÃ©er un superutilisateur :</h3>
            <pre><code>python manage.py createsuperuser</code></pre>

            <a href="admin.html">dÃ©tails de la commande</a>

            <p>AccÃ¨s Ã  lâ€™administration : <a href="http://127.0.0.1:8000/admin">http://127.0.0.1:8000/admin</a></p>
        </section>

        <section>
            <h2>RÃ©sumÃ© des commandes</h2>
            <pre><code>python manage.py startapp pages
# Modifier settings.py
# CrÃ©er views.py et urls.py
# Modifier urls.py du projet
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver</code></pre>
        </section>
        <div class="button-container">
            <button onclick="window.history.back()">Retour</button>
        </div>
    </main>
</body>
</html>
