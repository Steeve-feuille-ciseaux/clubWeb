<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RÃ©sumÃ© : Formulaire Ajout Article Django</title>
    <link rel="stylesheet" href="../assets/oldComputer.css">
</head>
<body>

<h1>CrÃ©er un formulaire dâ€™ajout dâ€™article sous Django</h1>

<section>
  <h2>1. Arborescence minimale</h2>
  <pre><code>mon_projet/
â”œâ”€â”€ manage.py
â”œâ”€â”€ mon_projet/
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ views.py
â”‚   â”œâ”€â”€ urls.py        â† Ã  crÃ©er
â”‚   â”œâ”€â”€ forms.py       â† Ã  crÃ©er
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚       â”œâ”€â”€ article_form.html     â† Ã  crÃ©er
â”‚   â”‚       â””â”€â”€ article_success.html  â† Ã  crÃ©er
</code></pre>
</section>

<section>
  <h2>2. CrÃ©er <code>forms.py</code></h2>
  <pre><code>from django import forms
from .models import Article

class ArticleForm(forms.ModelForm):
    class Meta:
        model = Article
        fields = ['titre', 'contenu']
</code></pre>
</section>

<section>
  <h2>3. Modifier la vue <code>ajouter_article</code></h2>
  <pre><code>from django.shortcuts import render
from .forms import ArticleForm

def ajouter_article(request):
    if request.method == 'POST':
        form = ArticleForm(request.POST)
        if form.is_valid():
            form.save()
            return render(request, 'pages/article_success.html')
    else:
        form = ArticleForm()
    return render(request, 'pages/article_form.html', {'form': form})
</code></pre>
</section>

<section>
  <h2>4. Ajouter lâ€™URL dans <code>pages/urls.py</code></h2>
  <pre><code>from django.urls import path
from .views import ajouter_article

urlpatterns = [
    path('ajouter/', ajouter_article, name='ajouter_article'),
]
</code></pre>

<p>Et inclure dans <code>mon_projet/urls.py</code> :</p>

<pre><code>from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('pages.urls')),
]
</code></pre>
</section>

<section>
  <h2>5. CrÃ©er les templates HTML</h2>
  <h3><code>article_form.html</code></h3>
  <pre><code>&lt;h1&gt;Ajouter un article&lt;/h1&gt;
&lt;form method="post"&gt;
    {% csrf_token %}
    {{ form.as_p }}
    &lt;button type="submit"&gt;Publier&lt;/button&gt;
&lt;/form&gt;
</code></pre>

  <h3><code>article_success.html</code></h3>
  <pre><code>&lt;h2&gt;Article ajoutÃ© avec succÃ¨s !&lt;/h2&gt;
&lt;a href="/ajouter/"&gt;Ajouter un autre article&lt;/a&gt;
</code></pre>
</section>

<section style="text-align:center;">
  <h2>ğŸš€ Tester :</h2>
  <p>AccÃ©der Ã  <a href="http://localhost:8000/ajouter/" target="_blank">http://localhost:8000/ajouter/</a> pour voir le formulaire</p>
  <p>Ajouter un article et vÃ©rifier la page de succÃ¨s</p>
</section>

<div class="button-container">
    <button onclick="window.history.back()">Retour</button>
</div>

</body>
</html>
