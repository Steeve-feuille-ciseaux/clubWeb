<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Django ‚Äì Modifier & Supprimer un Article</title>
    <link rel="stylesheet" href="../assets/oldComputer.css">
</head>
<body>

<h1>‚úèÔ∏è Modifier & Supprimer un article ‚Äì Django</h1>

<section>
  <h2>1. Vues ‚Äì <code>views.py</code></h2>
  <pre><code>def modifier_article(request, article_id):
    article = get_object_or_404(Article, id=article_id)
    if request.method == 'POST':
        form = ArticleForm(request.POST, instance=article)
        if form.is_valid():
            form.save()
            return redirect('liste_articles')
    else:
        form = ArticleForm(instance=article)
    return render(request, 'pages/article_form.html', {'form': form, 'modifier': True})

def supprimer_article(request, article_id):
    article = get_object_or_404(Article, id=article_id)
    if request.method == 'POST':
        article.delete()
        return redirect('liste_articles')
    return render(request, 'pages/article_confirm_delete.html', {'article': article})
</code></pre>
</section>

<section>
  <h2>2. Routes ‚Äì <code>urls.py</code></h2>
  <pre><code>path('articles/&lt;int:article_id&gt;/modifier/', modifier_article, name='modifier_article'),
path('articles/&lt;int:article_id&gt;/supprimer/', supprimer_article, name='supprimer_article'),
</code></pre>
</section>

<section>
  <h2>3. Formulaire de modification ‚Äì <code>article_form.html</code></h2>
  <pre><code>&lt;h1&gt;{% if modifier %}Modifier{% else %}Ajouter{% endif %} un article&lt;/h1&gt;
&lt;form method="post"&gt;
    {% csrf_token %}
    {{ form.as_p }}
    &lt;button type="submit"&gt;
        {% if modifier %}Enregistrer les modifications{% else %}Publier{% endif %}
    &lt;/button&gt;
&lt;/form&gt;
</code></pre>
</section>

<section>
  <h2>4. Page de confirmation ‚Äì <code>article_confirm_delete.html</code></h2>
  <pre><code>&lt;h1&gt;Supprimer l‚Äôarticle&lt;/h1&gt;
&lt;p&gt;Es-tu s√ªr de vouloir supprimer : &lt;strong&gt;{{ article.titre }}&lt;/strong&gt; ?&lt;/p&gt;
&lt;form method="post"&gt;
    {% csrf_token %}
    &lt;button type="submit"&gt;Oui, supprimer&lt;/button&gt;
    &lt;a href="{% url 'liste_articles' %}"&gt;Annuler&lt;/a&gt;
&lt;/form&gt;
</code></pre>
</section>

<section style="text-align:center;">
  <h2>üöÄ Tester</h2>
  <p>üìù Acc√®de √† : <a href="http://localhost:8000/articles/">/articles/</a></p>
  <p>‚úÖ Clique sur <strong>Modifier</strong> ou <strong>Supprimer</strong> pour tester les actions</p>
</section>

<div class="button-container">
    <button onclick="window.history.back()">Retour</button>
</div>

</body>
</html>
